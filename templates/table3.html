<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
    <title>User Table X </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <style>
        .myTableRow:hover {
            background-color: lightblue;
        }

        tbody {
            height:300px;
            overflow:auto:
        }


    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container_top">
        <div class="col-md-12">
            <h1>{{item}}, owner: {{owner}}</h1>
        </div>
    </div>

    <div class="container">
        <div class="col-md-12">
<!--            <h1>{{item}}, owner: {{owner}}</h1>-->
            <table class="table table-bordered",id="myTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Action</th>
                        <th>Action Owner</th>
                        <th>Target Date</th>
                        <th>Completion Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for x in lst %}
                    <tr class="myTableRow" style="height: 10px;" onclick="populateActionInput('{{ x.Action_desc }}')">

                        <td>{{x.ID}}</td>
                        <td>{{ x.Action_desc }}</td>
                        <td>{{ x.Action_Owner }}</td>
                        <td>{{ x.DueDate }}</td>
                        <td>{{ x.Compdate}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="bottom-container">
            <div class="container" id="myForm" >
                <form action="/add_action" method="POST">
                    <div class="col">

                      <label for="Prim_desc">Category:</label>
                      <input type="label" name="Category" id="Prim_descx" placeholder="Item name" value={{category}} readonly style="background-color: lightgrey;">
                      <label for="Prim_desc">Item name:</label>
                      <input type="label" name="Prim_desc" id="Prim_desc" placeholder="Item name" value={{item}} readonly style="background-color: lightgrey;">
                      <label for="Prim_desc">Primary Owner:</label>
                      <input type="label" name="Prim_owner" id="Prim_owner" placeholder="owner" value={{owner}} readonly style="background-color: lightgrey;">
                      <input type="label" name="ID" id="ID" placeholder="ID" value={{ID}} readonly style="background-color: lightgrey;">

                        <input type="submit" name = "button" value="Back to All">

                    </div>
                  <div class="form-row">
                    <div class="col">
                        <label for="Prim_owner">Action:</label>
                        <input type="text" name="action" placeholder="Action">
                        <label for="Prim_owner">owner:</label>
                        <input type="text" name="owner" placeholder="Owner">
                        <label for="dueDate">Due Date:</label>
                        <input type="date" id="dueDate" name="dueDate">
                        <label for="compDate">Completion Date:</label>
                        <input type="date" id="compDate" name="compDate">

                    </div>
                  </div>
                  <div class="form-row">
                    <div class="col">
                          <input type="submit" name="button" value="Update">
                          <input type="submit" name = "button" value='Add'>
                          <input type="submit" name ="button" value='delete'>
                    </div>
                  </div>


            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
          $('input[name="button"]').click(function(event) {
            if ($(this).val() == 'Add') {
              var action = $('input[name="action"]').val();
              var owner = $('input[name="owner"]').val();
              var dueDate = $('#dueDate').val();

              if (action == '' || owner == '' || dueDate == '') {
                alert('Please fill in all fields before submitting.');
                event.preventDefault();
              }
            }
          });
        });
    </script>

    <script>
        $(document).ready(function() {
    // add click event listener to each row in the table
    $('.myTableRow').click(function() {
        // remove the class from all rows in the table
        $('.myTableRow').removeClass('highlighted-row');
        // add the class to the clicked row
        $(this).addClass('highlighted-row');

        // get the values from the relevant columns in the clicked row
        var action = $(this).find('td:eq(1)').text();
        var owner = $(this).find('td:eq(2)').text();
        var dueDate = $(this).find('td:eq(3)').text();
        var ID = $(this).find('td:eq(0)').text();

        // set the values in the corresponding input fields
        $('input[name="action"]').val(action);
        $('input[name="owner"]').val(owner);
        $('#dueDate').val(dueDate);
        $('input[name="ID"]').val(ID);
    });
});

    </script>

    <script>
$(document).ready(function() {
    // add click event listener to each row in the table
    $('.myTableRow').click(function() {
        // get the values from the relevant columns in the clicked row
        var action = $(this).find('td:eq(1)').text();
        var owner = $(this).find('td:eq(2)').text();
        var dueDate = $(this).find('td:eq(3)').text();
        var ID = $(this).find('td:eq(0)').text();


        // set the values in the corresponding input fields
        $('input[name="action"]').val(action);
        $('input[name="owner"]').val(owner);
        $('#dueDate').val(dueDate);
        $('input[name="ID"]').val(ID);
    });
});
    </script>



<style>


.container {
  height: calc(100vh - 230px); /* Set height to fill the viewport minus height of the bottom container */
  overflow-y: auto; /* Add scrollbar to the content */
}


.bottom-container {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 150px; /* Set height to desired size */
  background-color: #f5f5f5;
  border-top: 1px solid #ccc;
  padding: 20px;
}


.form-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.container_top {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 10vh;
    text-align: center; /* add this rule */
}



.col {
  flex: 1;
  margin-right: 10px;
}

.col:last-child {
  margin-right: 0;
}

.highlighted-row {
    background-color: cornsilk;
    color: black;
}




</style>
</body>
</html>
